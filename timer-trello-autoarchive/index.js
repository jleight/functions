module.exports=function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){var e=process.env[t];if(!e)throw new Error("Environment variable "+t+" has not been defined!");return e}function o(t){return a.__awaiter(this,void 0,void 0,function(){var e,n,o,i,p,d;return a.__generator(this,function(a){switch(a.label){case 0:return e=new u.default({key:r(c),token:r(s),list:r(f)}),[4,e.getCards()];case 1:n=a.sent(),o=0,i=n,a.label=2;case 2:return o<i.length?(p=i[o],[4,e.getCardMoves(p)]):[3,6];case 3:return d=a.sent().filter(function(t){return t.data.listAfter.id===r(f)}).map(function(t){return new Date(t.date).getDate()}),d.length>0&&Math.max.apply(null,d)<l?(t.log("card["+p.id+'] = "'+p.name+'"'),[4,e.archiveCard(p)]):[3,5];case 4:a.sent(),a.label=5;case 5:return o++,[3,2];case 6:return[2]}})})}function i(t){o(t).then(function(){return t.done()}).catch(function(e){return t.done(e)})}var a=n(1),u=n(2),c="TRELLO_KEY",s="TRELLO_TOKEN",f="TRELLO_LIST",l=(new Date).getDate()-14;e.run=i},function(t,e,n){var r,o,i,a,u,c,s,f,l,p;!function(n){function i(t,e){return function(n,r){return t[n]=e?e(n,r):r}}var a="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:{};r=[e],o=function(t){n(i(a,i(t)))}.apply(e,r),!(void 0!==o&&(t.exports=o))}(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};i=function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},u=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]]);return n},c=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(o=t[u])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},s=function(t,e){return function(n,r){e(n,r,t)}},f=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,u)}c((r=r.apply(t,e||[])).next())})},p=function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:n(0),throw:n(1),return:n(2)}},t("__extends",i),t("__assign",a),t("__rest",u),t("__decorate",c),t("__param",s),t("__metadata",f),t("__awaiter",l),t("__generator",p)})},function(t,e,n){"use strict";function r(t){return"string"==typeof t?t:t.id}var o=n(1),i=n(3),a="api.trello.com",u=function(){function t(t){var e=t.key,n=t.token,r=t.list;this.key=e,this.token=n,this.list=r}return t.prototype.getCards=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return[2,this.get("lists/"+this.list+"/cards")]})})},t.prototype.getCardMoves=function(t){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(e){return[2,this.get("cards/"+r(t)+"/actions?filter=updateCard:idList")]})})},t.prototype.archiveCard=function(t){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(e){return[2,this.put("cards/"+r(t)+"/closed",{value:!0})]})})},t.prototype.get=function(t){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(n){switch(n.label){case 0:return[4,i.request({host:a,path:this.formatPath(t),method:"GET"})];case 1:return e=n.sent(),[2,JSON.parse(e)]}})})},t.prototype.put=function(t,e){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){switch(n.label){case 0:return[4,i.request({host:a,path:this.formatPath(t),method:"PUT",headers:{"Content-Type":"application/json"}},JSON.stringify(e))];case 1:return n.sent(),[2]}})})},t.prototype.formatPath=function(t){return"/1/"+t+(t.indexOf("?")>=0?"&":"?")+"key="+this.key+"&token="+this.token},t}();e.__esModule=!0,e.default=u},function(t,e,n){"use strict";function r(t,e){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return[2,new Promise(function(n,r){var o=i.request(t,function(t){t.statusCode>=400&&r(new Error("Request failed, status code: "+t.statusCode));var e=[];t.on("data",function(t){return e.push(t.toString())}).on("end",function(){return n(e.join(""))})}).on("error",r);e&&o.write(e),o.end()})]})})}var o=n(1),i=n(4);e.request=r},function(t,e){t.exports=require("https")}]);